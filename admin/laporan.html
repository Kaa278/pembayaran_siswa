<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Laporan Keuangan - Admin</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../../assets/css/style.css">

    <style>
        /* --- CSS KONSISTEN ADMIN --- */
        body { padding-bottom: 50px; }

        /* --- TOOLBAR LAPORAN YANG DIPERBAIKI (CLEAN STYLE) --- */
        .toolbar-card {
            background: white; 
            padding: 20px; 
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.03); 
            margin-bottom: 25px;
            display: flex; 
            justify-content: space-between; /* Memisahkan Kiri (Filter) dan Kanan (Export) */
            align-items: center; 
            flex-wrap: wrap; 
            gap: 20px;
        }

        /* Group Filter (Kiri) */
        .filter-section {
            display: flex; 
            gap: 10px; 
            align-items: center;
            flex-wrap: wrap;
        }

        /* Input & Select Style - Dibuat Tinggi 45px agar sejajar */
        .form-select, .form-input {
            height: 45px; 
            padding: 0 15px; 
            border: 1px solid #e2e8f0; 
            border-radius: 10px;
            background: #f8fafc; /* Background abu muda modern */
            color: #475569; 
            font-family: 'Poppins'; 
            font-size: 14px;
            outline: none;
            transition: all 0.3s;
            min-width: 180px; 
        }

        .form-select:focus, .form-input:focus {
            border-color: #4a6cf7; 
            background: white;
            box-shadow: 0 0 0 3px rgba(74, 108, 247, 0.1);
        }

        /* Tombol Tampilkan (Primary) */
        .btn-filter {
            height: 45px;
            background: #4a6cf7; 
            color: white; 
            border: none; 
            padding: 0 25px; 
            border-radius: 10px; 
            cursor: pointer; 
            font-weight: 500; 
            display: flex; 
            align-items: center; 
            gap: 8px;
            font-family: 'Poppins';
            transition: 0.3s;
        }
        .btn-filter:hover { background: #324ecc; transform: translateY(-1px); }

        /* Group Export (Kanan) */
        .export-section {
            display: flex; 
            gap: 10px;
        }

        /* Tombol Export Style (Outline) */
        .btn-export {
            height: 45px;
            padding: 0 20px;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            display: flex; 
            align-items: center; 
            gap: 8px;
            transition: all 0.3s;
            background: white;
            font-family: 'Poppins';
        }

        /* Warna Khusus Excel & PDF */
        .btn-excel { border: 1px solid #10b981; color: #10b981; }
        .btn-excel:hover { background: #10b981; color: white; }

        .btn-pdf { border: 1px solid #ef4444; color: #ef4444; }
        .btn-pdf:hover { background: #ef4444; color: white; }

        /* --- END TOOLBAR STYLE --- */

        /* Summary Cards */
        .summary-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 20px; margin-bottom: 25px;
        }
        .stat-card {
            background: white; padding: 20px; border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.03); border: 1px solid #f1f5f9;
            display: flex; flex-direction: column; justify-content: center;
        }
        .stat-label { font-size: 13px; color: #64748b; margin-bottom: 5px; }
        .stat-value { font-size: 24px; font-weight: 700; color: #1e293b; }
        .stat-icon {
            width: 40px; height: 40px; border-radius: 10px; display: flex; align-items: center; justify-content: center;
            margin-bottom: 10px; font-size: 18px;
        }
        .bg-blue-light { background: #eef2ff; color: #4a6cf7; }
        .bg-green-light { background: #ecfdf5; color: #059669; }
        .bg-orange-light { background: #fff7ed; color: #ea580c; }

        /* Chart Area */
        .chart-card {
            background: white; padding: 25px; border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.03); margin-bottom: 25px;
        }
        .chart-placeholder {
            width: 100%; height: 300px; background: #f8fafc; border-radius: 12px;
            border: 2px dashed #cbd5e1; display: flex; align-items: center; justify-content: center;
            color: #94a3b8; flex-direction: column; gap: 10px;
        }

        /* Table */
        .card { background: white; border-radius: 16px; padding: 25px; box-shadow: 0 4px 20px rgba(0,0,0,0.03); }
        .table-responsive { overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; white-space: nowrap; }
        th { text-align: left; padding: 15px; font-size: 13px; color: #64748b; border-bottom: 2px solid #f1f5f9; background: #f8fafc; }
        td { padding: 15px; font-size: 14px; border-bottom: 1px solid #f1f5f9; color: #1e293b; vertical-align: middle; }

        @media(max-width: 768px) {
            .toolbar-card { flex-direction: column; align-items: stretch; }
            .filter-section, .export-section { flex-direction: column; width: 100%; }
            .form-select, .form-input, .btn-filter, .btn-export { width: 100%; }
        }
    </style>
</head>
<body class="logged-in admin">
    
    <header>
        <div class="container">
            <div class="header-content">
                <a href="dashboard.html" class="logo">
                    <i class="fas fa-graduation-cap"></i>
                    <h1>Admin</h1>
                </a>
                <nav class="nav-desktop">
                    <ul>
                        <li><a href="dashboard.html"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                        <li><a href="siswa.html"><i class="fas fa-users"></i> Data Siswa</a></li>
                        <li><a href="tagihan.html"><i class="fas fa-file-invoice-dollar"></i> Tagihan</a></li>
                        <li><a href="verifikasi.html"><i class="fas fa-check-circle"></i> Verifikasi</a></li>
                        <li><a href="pembayaran.html"><i class="fas fa-money-check-alt"></i> Pembayaran</a></li>
                        <li><a href="laporan.html" class="active"><i class="fas fa-chart-bar"></i> Laporan</a></li>
                    </ul>
                </nav>
                <div class="user-menu" style="display: flex; gap: 10px; align-items: center;">
                    <a href="../../index.html" class="btn btn-outline" style="padding: 8px 20px; display: none;">Keluar</a>
                    <div class="hamburger" id="hamburger"><span></span><span></span><span></span></div>
                </div>
            </div>
        </div>
        <style> @media(min-width: 769px) { .user-menu .btn-outline { display: block !important; } } </style>
    </header>

    <div class="mobile-sidebar" id="mobileSidebar">
        <div class="mobile-sidebar-header">
            <h3>Menu Admin</h3>
            <button class="close-sidebar" id="closeSidebar"><i class="fas fa-times"></i></button>
        </div>
        <ul class="sidebar-menu">
            <li><a href="dashboard.html">Dashboard</a></li>
            <li><a href="siswa.html">Data Siswa</a></li>
            <li><a href="tagihan.html">Tagihan</a></li>
            <li><a href="verifikasi.html">Verifikasi</a></li>
            <li><a href="pembayaran.html">Pembayaran</a></li>
            <li><a href="laporan.html" class="active">Laporan</a></li>
            <li><a href="../../index.html" style="color: #ef4444;">Keluar</a></li>
        </ul>
    </div>
    <div class="overlay" id="overlay"></div>

    <main class="main-content">
        <div class="container">
            <div class="page-header" style="margin-bottom: 20px;">
                <h2 style="color: #1e293b; font-weight: 700;">Laporan Keuangan</h2>
                <p style="color: #64748b;">Ringkasan pemasukan dan rekapitulasi transaksi sekolah.</p>
            </div>

            <div class="toolbar-card">
                
                <div class="filter-section">
                    <div style="position:relative;">
                        <select id="reportType" class="form-select">
                            <option value="bulanan">Laporan Bulanan</option>
                            <option value="tahunan">Laporan Tahunan</option>
                            <option value="harian">Laporan Harian</option>
                        </select>
                    </div>

                    <input type="month" id="datePicker" class="form-input" value="2024-03">

                    <button class="btn-filter" onclick="generateReport()">
                        <i class="fas fa-filter"></i> Tampilkan
                    </button>
                </div>
                
                <div class="export-section">
                    <button class="btn-export btn-excel" onclick="alert('Export Excel...')">
                        <i class="fas fa-file-excel"></i> Export Excel
                    </button>
                    <button class="btn-export btn-pdf" onclick="alert('Export PDF...')">
                        <i class="fas fa-file-pdf"></i> PDF
                    </button>
                </div>

            </div>

            <div class="summary-grid">
                <div class="stat-card">
                    <div class="stat-icon bg-blue-light"><i class="fas fa-wallet"></i></div>
                    <div class="stat-label">Total Pemasukan (Maret)</div>
                    <div class="stat-value">Rp 45.200.000</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon bg-green-light"><i class="fas fa-check-circle"></i></div>
                    <div class="stat-label">Transaksi Sukses</div>
                    <div class="stat-value">128</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon bg-orange-light"><i class="fas fa-clock"></i></div>
                    <div class="stat-label">Menunggu Pembayaran</div>
                    <div class="stat-value">15</div>
                </div>
            </div>

            <div class="chart-card">
                <h3 style="margin-bottom: 20px; font-size: 18px;">Grafik Pemasukan Bulan Ini</h3>
                <div class="chart-placeholder">
                    <i class="fas fa-chart-area" style="font-size: 48px; margin-bottom: 10px;"></i>
                    <p>Visualisasi Grafik Pemasukan Akan Muncul Di Sini</p>
                    <small>(Membutuhkan Library Chart.js)</small>
                </div>
            </div>

            <div class="card">
                <div style="margin-bottom: 20px; display:flex; justify-content:space-between; align-items:center;">
                    <h3 style="margin:0; font-size:18px;">Rincian Transaksi</h3>
                    <input type="text" placeholder="Cari data..." style="padding:8px 15px; border:1px solid #e2e8f0; border-radius:8px; outline:none;">
                </div>

                <div class="table-responsive">
                    <table id="reportTable">
                        <thead>
                            <tr>
                                <th>Tanggal</th>
                                <th>ID Transaksi</th>
                                <th>Kategori</th>
                                <th>Keterangan</th>
                                <th>Metode</th>
                                <th>Jumlah</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>01 Mar 2024</td>
                                <td>#TRX-001</td>
                                <td>SPP</td>
                                <td>Pembayaran SPP a.n Ahmad</td>
                                <td>Transfer BCA</td>
                                <td style="color:#059669; font-weight:600;">+ Rp 350.000</td>
                            </tr>
                            <tr>
                                <td>02 Mar 2024</td>
                                <td>#TRX-002</td>
                                <td>Uang Gedung</td>
                                <td>Cicilan 1 a.n Budi</td>
                                <td>Tunai</td>
                                <td style="color:#059669; font-weight:600;">+ Rp 1.000.000</td>
                            </tr>
                            <tr>
                                <td>03 Mar 2024</td>
                                <td>#TRX-003</td>
                                <td>Seragam</td>
                                <td>Seragam Olahraga a.n Citra</td>
                                <td>GoPay</td>
                                <td style="color:#059669; font-weight:600;">+ Rp 250.000</td>
                            </tr>
                            <tr>
                                <td>03 Mar 2024</td>
                                <td>#TRX-004</td>
                                <td>SPP</td>
                                <td>Pembayaran SPP a.n Dewi</td>
                                <td>Transfer BRI</td>
                                <td style="color:#059669; font-weight:600;">+ Rp 350.000</td>
                            </tr>
                            <tr style="background-color: #f8fafc; font-weight: bold;">
                                <td colspan="5" style="text-align: right;">Total Pemasukan:</td>
                                <td style="color: #4a6cf7;">Rp 1.950.000</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </main>

    <script>
        // Simple Interaction Logic
        function generateReport() {
            const btn = document.querySelector('.btn-filter');
            const originalText = btn.innerHTML;
            
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Memuat...';
            btn.disabled = true;

            // Simulate loading
            setTimeout(() => {
                btn.innerHTML = originalText;
                btn.disabled = false;
                alert('Data laporan berhasil diperbarui!');
            }, 1000);
        }

        // Logic Input Tanggal berubah sesuai Tipe Laporan
        const reportType = document.getElementById('reportType');
        const datePicker = document.getElementById('datePicker');

        reportType.addEventListener('change', function() {
            if(this.value === 'tahunan') {
                datePicker.type = 'number';
                datePicker.placeholder = '2024';
                datePicker.value = '2024';
            } else if (this.value === 'harian') {
                datePicker.type = 'date';
            } else {
                datePicker.type = 'month';
            }
        });

        // Mobile Sidebar Toggle
        document.addEventListener('DOMContentLoaded', () => {
            const hamburger = document.getElementById('hamburger');
            const mobileSidebar = document.getElementById('mobileSidebar');
            const overlay = document.getElementById('overlay');
            const closeSidebar = document.getElementById('closeSidebar');
            function toggle() { mobileSidebar.classList.toggle('active'); overlay.classList.toggle('active'); }
            if(hamburger) hamburger.addEventListener('click', toggle);
            if(closeSidebar) closeSidebar.addEventListener('click', toggle);
            if(overlay) overlay.addEventListener('click', toggle);
        });
    </script>
</body>
</html>